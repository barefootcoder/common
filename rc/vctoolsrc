eval "set "`grep VCtoolsDir ~/.vctools/vctools.conf`
alias vc $VCtoolsDir/bin/vc
set complete_file=~/.tcshrc.complete.vc
if ( ! -e $complete_file || $?tcsh_reset ) then
	# refresh VCtools shell completion files
	vc shell-complete >$complete_file
endif
source $complete_file
unset complete_file

alias vcd 'cd `vc info -P "\!*" project:root` ; setenv VCTOOLS_SHELL vc ; resrc'
complete vcd 'p/1/`vc info project:all`/'

if ( $?VCTOOLS_SHELL ) then
	alias st 'vc stat-plus'
	alias sync vc sync
	alias vpush vc push
	alias stg vc stage
	alias istg git add -i
	alias stg-amend 'vc amend-local'
	alias unstage vc unstage
	alias commit vc commit
	alias unget vc unget
	alias branches vc show-branches
	alias unbranch vc unbranch
	alias rebranch vc rebranch
	alias vmerge vc merge
	alias resolved vc resolved
	alias stash vc stash
	alias stash-p vc stash-p
	alias unstash vc my-unstash

	alias branch vbranch

	alias vd git diff --color-moved
	alias vcf vc commit-filedate
	alias vnew git add -N
	alias vdel git rm
	alias vg  'vgrep -e \!*'
	alias vgl 'vgrep -Ce \!*'
	alias vgc 'vgrep -Pe \!*'
	alias vgt 'vgrep -Te \!*'
	alias vf  'vgrep -e . -l | grep -P \!* | $PAGER'
	alias vlog git-helper-log
	alias vbranch git-helper-branch
	alias blameline 'perl -lne '\''($f,$l)=split(":"); print "$f:",`git blame -L$l,$l $f` =~ s/\).*/)/r'\'
	alias tfix 'checktabs -n ; sleep 1 ; vcpatchws -f `checktabs -nb`'
			set page_and_hilite='$PAGER +"/^commit|"`perl -e "print shift =~ s/^#?/#/r" \!^`'
	alias vld "vlog -dLR | $page_and_hilite"
	alias vLd 'vlog -dR -- --grep \"\!^\" | '"$page_and_hilite"
	alias vls vc ls-mods
endif
